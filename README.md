# CARBONARA

Carbonara helps estimate the environmental impact of your cloud usage. By leveraging open source models and data, it enriches
the reports generated by your cloud provider and allows you to build reports and visualisations.

Carbonara uses Apache Spark to read and write the usage reports (typically in Parquet format) in a scalable way and, thanks to its modular approach, 
splits the enrichment of the data into configurable stages.

## Spark installed locally

`mvn clean package`
`spark-submit --class com.digitalpebble.Carbonara --driver-memory 2g ./target/carbonara-1.0.jar ./curs ./output`

## Docker

Build the Docker image with
`docker build -t carbonara:1.0 .`

The command below processes the data locally by mounting the directories containing the CURs and output as volumes:
```
docker run -it  -v ./curs:/curs -v ./output:/output  carbonara:1.0 \
/opt/spark/bin/spark-submit  \
--class com.digitalpebble.Carbonara \
--master 'local[*]' \
/usr/local/lib/carbonara-1.0.jar \
/curs /output
```
